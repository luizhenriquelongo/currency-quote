(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8295)}])},8295:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s=n(5893),l=n(7294),i=n(720),a=n(586),r=n(7357),o=n(629),c=n(5861),d=n(3156),u=n(8840),h=n.n(u),x=n(5708),p=n.n(x),f=n(6886),m=n(8150),j=n(3321),y=n(1737),b=n(6913);let g=e=>{let{handleApplyFilters:t}=e,[n,i]=(0,l.useState)(null),[a,r]=(0,l.useState)(null),[o,c]=(0,l.useState)(null),d=e=>{i(e),null!==a&&e>a&&r(e)},u=e=>{null!==n&&e<n&&i(e),r(e)},h=()=>{t(n,a,c)};return(0,s.jsxs)(f.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,s.jsx)(f.ZP,{item:!0,children:(0,s.jsx)(b.M,{label:"Data Inicial",value:n,onChange:d,renderInput:e=>(0,s.jsx)(m.Z,{...e}),disableFuture:!0})}),(0,s.jsx)(f.ZP,{item:!0,children:(0,s.jsx)(b.M,{label:"Data Final",value:a,onChange:u,renderInput:e=>(0,s.jsx)(m.Z,{...e}),disableFuture:!0})}),(0,s.jsx)(f.ZP,{item:!0,children:(0,s.jsx)(f.ZP,{container:!0,justifyContent:"flex-end",children:(0,s.jsx)(j.Z,{variant:"contained",onClick:h,children:"Aplicar"})})}),o&&(0,s.jsx)(f.ZP,{item:!0,xs:12,children:(0,s.jsx)(y.Z,{severity:"error",children:Object.values(o)})})]})},Z={chart:{type:"line",backgroundColor:"#f8f8f8",options3d:{enabled:!0,alpha:15,beta:30,depth:300}},tooltip:{pointFormat:"<b>{series.options.custom.code}:</b> {series.options.custom.symbol} {point.y:.2f}<br/>",shared:!0},title:{text:"Cota\xe7\xe3o baseada no Dolar ($)"},yAxis:{type:"logarithmic",title:{text:"Moeda X Dolar ($)"},tickInterval:1,lineWidth:2,offset:20},xAxis:[{type:"datetime",title:{text:"Data"},offset:20,tickWidth:1,labels:{format:"{value:%d %b %Y}"},dateTimeLabelFormats:{day:"%d %b %Y",week:"%d %b %Y",month:"%b %Y",year:"%Y"}}],plotOptions:{line:{dataLabels:{enabled:!0,format:"{series.options.custom.symbol} {point.y:.2f}"},depth:100}},series:[{name:"",data:[]}],credits:{enabled:!1}};function v(){let[e,t]=(0,l.useState)(Z),n=async(n,s,l)=>{console.log(n),console.log(s);let i=null==n?void 0:n.toISOString().split("T")[0],a=null==s?void 0:s.toISOString().split("T")[0],r=await fetch("http://localhost:8000/api/rates/?start_date=".concat(i,"&end_date=").concat(a,"&currencies=true")),o=await r.json();if(400===r.status)console.log("resposta \xe9 400"),l(o);else{let n;l(null),console.log(o),n=[],Object.entries(o.currencies).map(e=>{let[t,s]=e;"USD"!==t&&n.push({name:s.name,xAxis:0,custom:{code:s.code,symbol:s.symbol},data:o.results.map(e=>{let n=e.rates,s=e.date.split("-"),l=parseInt(s[0]),i=parseInt(s[1])-1,a=parseInt(s[2]);return[Date.UTC(l,i,a),parseFloat(n[t])]})})}),console.log(n),t({...e,series:n})}};return(0,s.jsx)(r.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100vw",children:(0,s.jsxs)(o.Z,{elevation:10,style:{padding:20},children:[(0,s.jsx)(r.Z,{display:"flex",justifyContent:"center",children:(0,s.jsx)(c.Z,{variant:"h2",gutterBottom:!0,children:"Currency Quote"})}),(0,s.jsx)(r.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",width:"80vw",children:(0,s.jsx)(i._,{dateAdapter:a.y,children:(0,s.jsxs)(d.Z,{maxWidth:"xl",style:{display:"flex"},children:[(0,s.jsx)(d.Z,{maxWidth:"md",style:{flex:2},children:(0,s.jsx)(p(),{highcharts:h(),options:e})}),(0,s.jsx)(d.Z,{maxWidth:"sm",style:{flex:1},children:(0,s.jsx)(r.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:(0,s.jsx)(g,{handleApplyFilters:n})})})]})})})]})})}}},function(e){e.O(0,[774,898,58,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);
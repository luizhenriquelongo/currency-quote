(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8295)}])},8295:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var s=n(5893),i=n(7294),l=n(720),a=n(586),r=n(7357),d=n(629),o=n(5861),c=n(3156),u=n(8840),h=n.n(u),p=n(5708),x=n.n(p),f=n(6886),m=n(8150),j=n(3321),y=n(1737),b=n(6913);let Z=e=>{let{handleApplyFilters:t}=e,[n,l]=(0,i.useState)(null),[a,r]=(0,i.useState)(null),[d,o]=(0,i.useState)(null),c=e=>{l(e),null!==a&&e>a&&r(e)},u=e=>{null!==n&&e<n&&l(e),r(e)},h=()=>{t(n,a,o)};return(0,s.jsxs)(f.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,s.jsx)(f.ZP,{item:!0,children:(0,s.jsx)(b.M,{label:"Start Date",value:n,onChange:c,renderInput:e=>(0,s.jsx)(m.Z,{...e}),disableFuture:!0})}),(0,s.jsx)(f.ZP,{item:!0,children:(0,s.jsx)(b.M,{label:"End Date",value:a,onChange:u,renderInput:e=>(0,s.jsx)(m.Z,{...e}),disableFuture:!0})}),(0,s.jsx)(f.ZP,{item:!0,children:(0,s.jsx)(f.ZP,{container:!0,justifyContent:"flex-end",children:(0,s.jsx)(j.Z,{variant:"contained",onClick:h,children:"Apply"})})}),d&&(0,s.jsx)(f.ZP,{item:!0,xs:12,children:(0,s.jsx)(y.Z,{severity:"error",children:Object.values(d)})})]})},g={chart:{type:"line",backgroundColor:"#f8f8f8",options3d:{enabled:!0,alpha:15,beta:30,depth:300}},tooltip:{pointFormat:"<b>{series.options.custom.code}:</b> {series.options.custom.symbol} {point.y:.2f}<br/>",shared:!0},title:{text:"Echange Rate (Dollar Based)"},yAxis:{type:"logarithmic",title:{text:"Rate X Dollar ($)"},tickInterval:1,lineWidth:2,offset:20},xAxis:[{type:"datetime",title:{text:"Date"},offset:20,tickWidth:1,labels:{format:"{value:%d %b %Y}"},dateTimeLabelFormats:{day:"%d %b %Y",week:"%d %b %Y",month:"%b %Y",year:"%Y"}}],plotOptions:{line:{dataLabels:{enabled:!0,format:"{series.options.custom.symbol} {point.y:.2f}"},depth:100}},series:[{name:"",data:[]}],credits:{enabled:!1}};function v(){let[e,t]=(0,i.useState)(g),n=async(n,s,i)=>{let l=null==n?void 0:n.toISOString().split("T")[0],a=null==s?void 0:s.toISOString().split("T")[0],r=await fetch("/api/rates/?start_date=".concat(l,"&end_date=").concat(a,"&currencies=true")),d=await r.json();if(400===r.status)i(d);else{let n;i(null),n=[],Object.entries(d.currencies).map(e=>{let[t,s]=e;"USD"!==t&&n.push({name:s.name,xAxis:0,custom:{code:s.code,symbol:s.symbol},data:d.results.map(e=>{let n=e.rates,s=e.date.split("-"),i=parseInt(s[0]),l=parseInt(s[1])-1,a=parseInt(s[2]);return[Date.UTC(i,l,a),parseFloat(n[t])]})})}),t({...e,series:n})}};return(0,s.jsx)(r.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",width:"100vw",children:(0,s.jsxs)(d.Z,{elevation:10,style:{padding:20},children:[(0,s.jsx)(r.Z,{display:"flex",justifyContent:"center",children:(0,s.jsx)(o.Z,{variant:"h2",gutterBottom:!0,children:"Currency Quote"})}),(0,s.jsx)(r.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",width:"80vw",children:(0,s.jsx)(l._,{dateAdapter:a.y,children:(0,s.jsxs)(c.Z,{maxWidth:"xl",style:{display:"flex"},children:[(0,s.jsx)(c.Z,{maxWidth:"md",style:{flex:2},children:(0,s.jsx)(x(),{highcharts:h(),options:e})}),(0,s.jsx)(c.Z,{maxWidth:"sm",style:{flex:1},children:(0,s.jsx)(r.Z,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:(0,s.jsx)(Z,{handleApplyFilters:n})})})]})})})]})})}}},function(e){e.O(0,[774,898,58,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);